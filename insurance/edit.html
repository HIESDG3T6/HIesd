
<!--Insurance Agent UI Assume agent logged in already-->
<!DOCTYPE html>
<html lang="en">
<head>
<title>Insurance Agent Panel </title>

	
	<!-- css files -->
	<link href="../css/css_slider.css" type="text/css" rel="stylesheet" media="all"><!-- slider css -->
    <link href="../css/bootstrap.css" rel='stylesheet' type='text/css' /><!-- bootstrap css -->
    <link href="../css/style.css" rel='stylesheet' type='text/css' /><!-- custom css -->
    
	<!-- //css files -->

	<!-- jquery-->
	<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="js/jquery.min.js"></script>
	<!-- //jquery-->

	<!-- google fonts -->
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i&amp;subset=cyrillic,cyrillic-ext,greek,greek-ext,latin-ext,vietnamese" rel="stylesheet">
	<link href="//fonts.googleapis.com/css?family=Dosis:200,300,400,500,600,700,800&amp;subset=latin-ext" rel="stylesheet">
	<!-- //google fonts -->
	
</head>
<body>

<!-- top header -->
<div class="header-top">
	<div class="container">
		<div class="row">
			<div class="col-sm-6">
				<ul class="d-lg-flex header-w3_pvt">
					<li class="mr-lg-3">
						<p> Welcome! Agent Wong</p>
						
					</li>

				</ul>
			</div>
			<div class="col-sm-6 header-right-w3_pvt">
				<ul class="d-lg-flex header-w3_pvt justify-content-lg-end">
					<li class="">
						<span class=""><span class="fa fa-clock-o"></span>Log out</span>
					</li>
				</ul>
			</div>
		</div>
	</div>
</div>
<!-- //top header -->

<!-- //header -->
<header class="py-3">
	<div class="container">
			<div id="logo">
				<h1> <a href="home.html"><span class="fa fa-stethoscope" aria-hidden="true"></span> Health Insurance </a></h1>
			</div>
		<!-- nav -->
		<nav class="d-lg-flex">

			<label for="drop" class="toggle"><span class="fa fa-bars"></span></label>
			<input type="checkbox" id="drop" />
			<ul class="menu mt-2 ml-auto">
				<li class="active"><a href="home.html">Home</a></li>
				<li class=""><a href="home.html">Account</a></li>

			</ul>
			<div class="login-icon ml-2">
				<a class="user" href="claim_history.html">Claims History</a>
			</div>
		</nav>
		<div class="clear"></div>
		<!-- //nav -->
	</div>
</header>
<!-- //header -->



<!--tables for claims --> 
<section class="table" id="claims">
	<div class="table-layer py-5">
		<div class="container py-lg-5">
			<h3 class="heading text-center mb-sm-5 mb-4">Claim</h3>
			<div class="table-block p-4">
				<!-- A form to update-->
				<form action="#" method="post" >
					<div class="row" >
						
						
						<div class="col-md-6 wthree_contact_left">
							<div class="form-group">
								<p class="col-sm-6 header-right-w3_pvt" style="color:white;" >Claim ID</p>
								<input type="text" id = "ClaimID_text" name="ClaimID" class="form-control" placeholder="Claim ID" required="" disabled>
							</div>

							<div class="form-group">
								<p class="col-sm-6 header-right-w3_pvt" style="color:white;" >Clinic Name</p>
								<input type="text" id = "ClinicName_text" name="ClinicName" class="form-control" placeholder="Clinic ID" required="" disabled>
							</div>
							<div class="form-group">
								<p class="col-sm-6 header-right-w3_pvt" style="color:white;" >Bill Amount</p>
								<input type="text" id = "BillAmount_text" name="BillAmount" class="form-control" placeholder="Bill Amount" required=""disabled>
							</div>
							<div class="form-group">
								<p class="col-sm-6 header-right-w3_pvt" style="color:white;" >Claim Status</p>
								<input type="text" id = "ClaimStatus_text" name="ClaimStatus" class="form-control" placeholder="Claim Status" required="" disabled>
							</div>
                            
						</div>
						<div class="col-md-6 wthree_contact_left_grid">
							<div class="form-group">
								<p class="col-sm-6 header-right-w3_pvt" style="color:white;" >Claim Date</p>
								<input type="text" id = "ClaimDate_text" name="ClaimDate" class="form-control" placeholder="Claim Date" required="" disabled>
                            </div>

							
							<div class="form-group">
								<p class="col-sm-6 header-right-w3_pvt" style="color:white;" >Patient ID</p>
								<input type="text" id = "PatientID_text" name="PatientID" class="form-control" placeholder="Patient ID" required="" disabled>
							</div>
							<div class="form-group">
								<p class="col-sm-6 header-right-w3_pvt" style="color:white;" >Claim Amount</p>
								<input type="text" id = "ClaimedAmount_text" name="ClaimedAmount" class="form-control" placeholder="Claim Amount" required="" disabled>
							</div>
                            
                            
							<div class="form-group">
								<p class="col-sm-6 header-right-w3_pvt" style="color:white;" >Refund Status</p>
								<select id="RefundStatus_text" name="RefundStatus" class="form-control" placeholder="Refund Status" >
									<option value="Pending">Pending</option>
									<option value="Approved">Approved</option>
									<option value="Rejected">Rejected</option>
								</select>

							</div>
						</div>
						<div class="col-md-12">
          
							<p class="col-sm-6 header-right-w3_pvt" style="color:white;" >Prescription</p>
							<textarea name="message" id = "Medication_text" name="Medication" class="form-control" placeholder="Medication" required=""disabled></textarea>

						</div>

						
						<div class="col-md-12 grid p" >
							<p class="col-sm-6 header-right-w3_pvt" >   </p>
							<div class="submit-buttons" style="text-align: center;">
								<button type="submit" class="btn">Submit</button>
                            </div>
                            
						</div>

						<div class="login-icon ml-2">
							<a class="user" href="home.html">Back</a>
						</div>



					</div>
                </form>
			</div>
			
		</div>
		
	</div>

	

</section>

<!-- //tables for claims --> 






<!-- copyright -->
<div class="copyright">
	<div class="container py-4">
		<div class=" text-center">
			<p>Â© 2020 Health Insurance Inc. All Rights Reserved </a> </p>
		</div>
	</div>
</div>
<!-- //copyright -->
		
<!-- move top -->
<div class="move-top text-right">
	<a href="#home" class="move-top"> 
		<span class="fa fa-angle-up  mb-3" aria-hidden="true"></span>
	</a>
</div>
<!-- move top -->


	<!-- START TO DISPLAY MESSAGE FROM DATABASE-->
	<script>
		// Helper function to display error message
		function showError(message) {
            // Hide the table and button in the event of error
           
            // Display an error under the main container
            $('#main-container')
                .append("<label>"+message+"</label>");
        }



		// get the ClaimID from the url query e.g. ?ClaimID = 5
		function getvalue(name){
			var reg = new RegExp("(^|&)"+name+"=([^&]*)(&|$)");
			var r = window.location.search.substr(1).match(reg);
			if (r!=null) return r[2]; return '';
		}



		var ClaimID = getvalue('ClaimID');
		//alert(getvalue('ClaimID'));

		



		// anonymous async function 
        // - using await requires the function that calls it to be async
		$(async() => {       
            // Change serviceURL to your own
            var serviceURL = "http://127.0.0.1:5000/claims/"+ClaimID;

			console.log(serviceURL);
			//after that can change it to only display opening 
            try {
                const response =
                 await fetch(
                   serviceURL, { method: 'GET' }
                );
                const data = await response.json();
                
				console.log(data)


				//set the value to the textinput
				$("#ClaimID_text").val(ClaimID);
				$("#ClinicName_text").val(data.ClinicName);
				$("#BillAmount_text").val(data.BillAmount);
				$("#ClaimStatus_text").val(data.ClaimStatus);
				$("#ClaimDate_text").val(data.ClaimDate);
				$("#PatientID_text").val(data.PatientID);
				$("#ClaimedAmount_text").val(data.ClaimedAmount);
				$("#RefundStatus_text").val(data.RefundStatus);
				$("#Medication_text").val(data.Medicine);

            
            } catch (error) {
                // Errors when calling the service; such as network error, 
                // service offline, etc
                showError('There is a problem retrieving insurance claims data, please try again later.<br />'+error);
            } // error
        });

	</script>

	<!--// END TO DISPLAY MESSAGE FROM DATABASE -->

</body>
</html>

